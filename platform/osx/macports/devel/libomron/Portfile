# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

# $Id$

PortSystem  1.0

name        libomron
version     0.9.0
categories  devel
platforms   darwin

maintainers Kyle Machulis nonpolynomial.com:kyle

homepage            http://qdot.github.com/libomron/
description         Omron health hardware support
long_description    Driver and development library for USB connected Omron Health Devices

master_sites    http://downloads.sourceforge.net/project/nplabs/libomron/${version}
checksums       md5      \
                sha1     \
                rmd160 

depends_lib port:cmake \
            port:libusb

post-extract {
    file mkdir ${worksrcpath}/build
}

configure {
    system "cd ${worksrcpath}/build \
            && cmake -DCMAKE_INSTALL_PREFIX=${prefix} -G \"Unix Makefiles\" .."
}

build.dir       ${worksrcpath}/build

post-install {
    system "cp -r ${worksrcpath}/platform/osx/OmronNullDriver.kext /System/Library/Extensions
            && kextload /System/Library/Extensions/OmronNullDriver.kext"